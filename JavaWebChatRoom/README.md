# JavaWebChatRoomDEMO

---



## 一、聊天室（后端）springboot + netty  + redis？ 、（前端）thymeleaf

-----



### 											简短的思路

------

因为简单的登录注册不太想写，自动简化为只要输入任意字符即可，后端做相同字符不处理，因为用队列存值，后续会改成数据库



### 1.1  运行流程

------

​	登录8080端口，输入username，进入聊天室，可以发送消息



### 1.2 功能

-------





### 1.3问题（已解决） 

-------

​	一、页面跳转问题，一直以为websocket访问是直接的地址访问，即尝试用ws://.....访问，其实只用访问8080端口，跳转到websocket编写页面，他会主动根据写的url主动向服务端推送，然后初始化channel，绑定监听，再返回页面，状态码102，（自我认知）

​	二、页面局部刷新，通过ajax监听，当发送消息时就局部刷新用户列表，reload（）不支持，使用

```js
$("#uTd").load(location.href + " #uTd");
//空格必须有
```







### 1.4问题（未解决）

-----



1、异步请求，因为向服务器推送用户名，加入在上一个还没放进队列中，连续发来二个请求，就会出现相同username，因为我的处理数据有时候过慢会出现这种状态

​	思路：

简单粗暴直接加锁，基本没人用

采用单例模式中双重校验锁，采用二重校验，代码过于长，可考虑，不知可不可行



2、username 与 channel 绑定问题

思路： 

因为用户名为唯一标识，redis存储



### 1.5预备扩展功能

-----------

1、多聊天室

2、私聊

3、高并发，降级处理

